(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46b71294"],{"1af6":function(t,e,r){var n=r("63b6");n(n.S,"Array",{isArray:r("9003")})},"20fd":function(t,e,r){"use strict";var n=r("d9f6"),i=r("aebd");t.exports=function(t,e,r){e in t?n.f(t,e,i(0,r)):t[e]=r}},"549b":function(t,e,r){"use strict";var n=r("d864"),i=r("63b6"),a=r("241e"),s=r("b0dc"),o=r("3702"),c=r("b447"),u=r("20fd"),f=r("7cd6");i(i.S+i.F*!r("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,i,m,p=a(t),l="function"==typeof this?this:Array,h=arguments.length,d=h>1?arguments[1]:void 0,g=void 0!==d,v=0,b=f(p);if(g&&(d=n(d,h>2?arguments[2]:void 0,2)),void 0==b||l==Array&&o(b))for(e=c(p.length),r=new l(e);e>v;v++)u(r,v,g?d(p[v],v):p[v]);else for(m=b.call(p),r=new l;!(i=m.next()).done;v++)u(r,v,g?s(m,d,[i.value,v],!0):i.value);return r.length=v,r}})},"54a1":function(t,e,r){r("6c1c"),r("1654"),t.exports=r("95d5")},"65eb":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"game container-fluid"},[r("h1",{staticClass:"page-title text-center"},[t._v(t._s(t.game.title)+" "+t._s(t.title)+" "+t._s(t.counter))]),r("p",{staticClass:"mb-2 text-center"},[r("router-link",{attrs:{to:"/"}},[t._v("返回首页")])],1),t.counter>=3?r("p",{staticClass:"tip text-center"},[t._v("[ "+t._s(t.game.title)+" ] 跳关PLC与服务器的连接已掉线，请检查线路或重启服务器。")]):t._e(),r("div",{staticClass:"buttons"},[r("i-button",{attrs:{type:"error"},on:{click:t.reset}},[t._v("一键复位")]),r("i-button",{attrs:{type:"warning"},on:{click:t.setReady}},[t._v("一键准备")]),r("i-button",{attrs:{type:"success"},on:{click:t.setStart}},[t._v("一键开始")]),r("i-button",{attrs:{type:"success"},on:{click:t.testLine}},[t._v("测试线路")]),r("i-button",{attrs:{type:"primary"},on:{click:t.refresh}},[t._v("立即同步")]),r("i-button",{attrs:{type:"info"},on:{click:t.levelControl}},[t._v("关卡状态")]),r("i-button",{attrs:{type:"info"},on:{click:t.outputControl}},[t._v("输出控制")]),r("i-button",{attrs:{type:"info"},on:{click:t.inputStatus}},[t._v("输入状态")])],1),r("div",{staticClass:"room-container mt-5"},[r("router-view")],1)])},i=[],a=(r("ac6a"),r("75fc")),s=(r("96cf"),r("3b8d")),o=(r("cadf"),r("551c"),r("097d"),r("7424")),c={name:"game",data:function(){return{levels:[],isConnected:!1,rooms:[],game:{title:"加载中..."},timer:0,timerNotice:0,loading:!1,gameId:0,counter:0}},methods:{reset:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!1!==confirm("确认进行一键复位操作？")){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,o["a"].post("/game/"+this.gameId+"/reset");case 4:t.sent;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),setReady:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!1!==confirm("确认进行一键准备操作？")){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,o["a"].post("/game/"+this.gameId+"/ready");case 4:t.sent;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),setStart:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!1!==confirm("确认进行一键开始操作？")){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,o["a"].post("/game/"+this.gameId+"/start");case 4:t.sent;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),testLine:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!1!==confirm("确认进行测试线路操作？")){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,o["a"].post("/game/"+this.gameId+"/test");case 4:t.sent;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getGame:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.counter++,t.next=3,o["a"].get("/game/"+this.gameId);case 3:e=t.sent,e.ok||this.$Message.error("服务器发送失败"),r=e.data.data,this.counter=0,this.rooms=Object(a["a"])(r.rooms),this.$store.commit("SET_ROOMS",this.rooms);case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),refresh:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getGame();case 2:this.$Message.success("数据同步成功");case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getNotices:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,r,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].get("/game/message");case 2:if(e=t.sent,e.ok){t.next=5;break}return t.abrupt("return",this.$Message.error("服务器获取失败"));case 5:r=e.data.data,r.forEach(function(t){"error"===t.theme?n.$Notice.error({title:"服务器通知",desc:t.message}):"primary"===t.theme&&n.$Notice.info({title:"服务器通知",desc:t.message})});case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),outputControl:function(){this.$router.push("/game/".concat(this.gameId,"/control"))},inputStatus:function(){this.$router.push("/game/".concat(this.gameId,"/status"))},levelControl:function(){this.$router.push("/game/".concat(this.gameId,"/main"))}},computed:{title:function(){return this.$store.state.title}},beforeDestroy:function(){this.timerNotice&&clearInterval(this.timerNotice),this.timer&&clearInterval(this.timer)},created:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.params.id,this.game.id=e,this.gameId=e,this.isConnected=!0,this.timer=setInterval(Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.getGame();case 2:case"end":return t.stop()}},t,this)})),1e3),this.timerNotice=setInterval(Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.getNotices();case 2:case"end":return t.stop()}},t,this)})),1500),t.next=8,this.getGame();case 8:return t.next=10,this.getNotices();case 10:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},u=c,f=(r("ecd3"),r("2877")),m=Object(f["a"])(u,n,i,!1,null,"557168a6",null);m.options.__file="game.vue";e["default"]=m.exports},"75fc":function(t,e,r){"use strict";var n=r("a745"),i=r.n(n);function a(t){if(i()(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}var s=r("774e"),o=r.n(s),c=r("c8bb"),u=r.n(c);function f(t){if(u()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return o()(t)}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){return a(t)||f(t)||m()}r.d(e,"a",function(){return p})},"774e":function(t,e,r){t.exports=r("d2d5")},"95d5":function(t,e,r){var n=r("40c3"),i=r("5168")("iterator"),a=r("481b");t.exports=r("584a").isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||a.hasOwnProperty(n(e))}},a745:function(t,e,r){t.exports=r("f410")},ac6a:function(t,e,r){for(var n=r("cadf"),i=r("0d58"),a=r("2aba"),s=r("7726"),o=r("32e9"),c=r("84f2"),u=r("2b4c"),f=u("iterator"),m=u("toStringTag"),p=c.Array,l={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(l),d=0;d<h.length;d++){var g,v=h[d],b=l[v],w=s[v],y=w&&w.prototype;if(y&&(y[f]||o(y,f,p),y[m]||o(y,m,v),c[v]=p,b))for(g in n)y[g]||a(y,g,n[g],!0)}},c8bb:function(t,e,r){t.exports=r("54a1")},d2d5:function(t,e,r){r("1654"),r("549b"),t.exports=r("584a").Array.from},ecd3:function(t,e,r){"use strict";var n=r("ed1c"),i=r.n(n);i.a},ed1c:function(t,e,r){},f410:function(t,e,r){r("1af6"),t.exports=r("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-46b71294.830e309f.js.map